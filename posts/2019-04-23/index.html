<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

        <title>日毎に文字列をひたすら追加する</title>

        <link rel="stylesheet" href="/css/stylesheet.css">
    </head>
    <body>
        <section id="page-title">
            <h1><a href="/">zou</a></h1>
        </section>
<div class="hidden_box">
    <label for="label1">
	<div id="elbody">
	<div id="face"></div>
  <div id="feet"></div>
</div>	
		</label>
    <input type="checkbox" id="label1"/>
    <div class="hidden_show">
           
			
		
		
    </div>
</div>




<section class="blog-post">
    <h1>日毎に文字列をひたすら追加する</h1>
    <div class="blog-post-subheader">
        April 23, 2019
    </div>

    <div class="blog-post-content">
        

<p>文字列をひたすら追加するだけのプログラムを作り、まとめてその日の分の日記にしてみます。</p>

<ul>
<li><p>使うもの</p>

<ul>
<li>yad（GUIダイアログ）</li>
</ul></li>

<li><p>実際の手順</p>

<ol>
<li>yadを呼び出す</li>
<li>文字列を入力</li>
<li>ファイル（ex. 2019-04-24.md）を作成</li>
<li>日付が変わるまで、3.に新しい文字列が追加され続けます。</li>
</ol></li>
</ul>

<h4 id="やり方">やり方</h4>

<p>シェルスクリプト<code>noteyad</code>を作ります。yadのオプションは色々あるので<a href="https://sourceforge.net/p/yad-dialog/wiki/Examples/">こちら</a>を参照してください。</p>

<pre><code class="language-sh">#!/bin/sh

NOTES=$(yad --width=1500 --posy=24 --posx=250 --entry --entry-label=&quot;Notes&quot; --no-buttons --close-on-unfocus)
DIR=$HOME/[markdownファイルの格納先]
TODAY=$(date &quot;+%Y-%m-%d&quot;)
TIME=$(date &quot;%H%M%S&quot;)
FILE=$DIR/$TODAY.md

if [ &quot;$NOTES&quot; = &quot;&quot; ]
then
exit 1
elif [ -f $FILE ]
then
	echo $NOTES &gt;&gt; $FILE
else
	TITLE=$(yad --width=1500 --posy=24 --posx=250 --entry --entry-label=&quot;Title&quot; --no-buttons --close-on-unfocus)
	echo &quot;---\ntitle: &quot;$TITLE&quot;\ndate: $TODAY\n---\n&quot; &gt; $FILE
	echo $NOTES &gt;&gt; $FILE
fi
</code></pre>

<p>あとは完成した<code>noteyad</code>を<code>$HOME/.bin/</code>などパスの通ったディレクトリに置いて、<code>chmod +x</code>で権限を変更。</p>

<p>中身は単純で、今日分のファイルがあればそのまま文字を追加し、ファイルがなければ、記事タイトルをYAMLヘッダーに書いてから、文字列を追加します。文字が入力されなければ終わります。</p>

<p>必要に応じて、リスト記載や、文字末尾にタイムスタンプを入れるのも良いかもしれません。</p>

<p>リストの場合は</p>

<pre><code>echo - $NOTES &gt;&gt; $FILE
</code></pre>

<p>に変更し、タイムスタンプは</p>

<pre><code>TIME=$(date &quot;+%H:%M:%S&quot;)

         .
         .
         .
echo $NOTES --- $TIME &gt;&gt; $FILE
</code></pre>

<p>とします。</p>

    </div>
</section>



<div class="modal_wrap">
<input id="trigger" type="checkbox">
	<div class="modal_overlay">
		<label for="trigger" class="modal_trigger"></label>
		<div class="modal_content">
			<label for="trigger" class="close_button">✖️</label>
				<ol>
<li>Theme: https://github.com/meibenny/elephants.git</li>
<li>Elephant: https://codepen.io/monstersaurous/pen/BCnHj</li>
<li>Button: https://codepen.io/Kuzlog/pen/XVOaPN/</li>
</ol>

		</div>
	</div>
</div>
<label for="trigger" class="open_button">Powered by Hugo</label>
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
</body>
</html>

